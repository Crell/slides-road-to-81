<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>The Road to 8.1</title>

    <meta name="author" content="Larry Garfield">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="palantir/palantir.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->


    <style type="text/css">

    ul.inline {
      margin: 0;
      padding: 0;
      list-style-type: none;
      text-align: center;
    }

    ul.inline li {
      display: inline;
    }

    </style>

  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section id="title">
          <h1>The road to 8.1</h1>
          <p>
            <small>Presented by <a href="http://www.garfieldtech.com/">Larry Garfield</a> (<a href="http://twitter.com/Crell">@Crell</a>)</small>
          </p>
        </section>
        <section id="about">
          <h2><a href="http://twitter.com/Crell">@Crell</a></h2>
          <img src="palantir/palantirnet-logo-4c-reversed.svg" alt="Palantir.net Pays me!" style="width: 300px; float: right;" />
          <ul>
            <li>Senior Architect, <a href="http://www.palantir.net/">Palantir.net</a></li>
            <li>Drupal 8 Web Services Lead</li>
            <li>Drupal Representative, <a href="http://www.php-fig.org/">PHP-FIG</a></li>
            <li>Advisor, Drupal Association</li>
            <li>Loveable pedant</li>
          </ul>
        </section>
          <section>
            <img src="assets/drupal-8-logo.png"  style="height: 600px;" alt="Drupal 8" data-credit="https://drupal.org/node/2119739" />
          </section>
        </section>

        <div style="display: none;">

D8: Longest release cycle ever!

Let's please not do that again, ever.

Prague: OK, new plan!

Explain new release cycle.

Important detail: What is an API break?

What is an API?

Old style: "Anything line that begins with the word "function"
          And doesn't have an _
          Except for when that counts too
          And oh yeah, arbitrary array structures

We broke APIs between versions because our architecture didn't let us do otherwise
          Now we can do otherwise.

Old core promise: "We won't break your modules."

New core promise: "We won't break well-behaved modules."

"Well-behaved": Needs definition.
          Definition: Uses parts of the code we say are "safe".
          Uses parts of the architecture we say are "safe".

This is only partially a documentation problem.
          It's also a "separate safe from unsafe" problem (which we're doing a lot better at)
          Recommendation: Use documentation as a driver for separation

Documentation kick-start: Symfony:
          http://symfony.com/doc/current/contributing/code/bc.html

Short version:
Tests: Not an API, ever

@api interface: Promise hinting, implementing, extending
un-noted interface: Promise hinting, implementing, not extending
@internal interface: We promise nothing

@api class: Promise hinting, constructor, extending, use public
un-noted class: Promise hinting, constructor, but NOT overriding anything (inc protected)
@internal class: We promise nothing

Recommendation: Traits follow same rules as classes


Great, so what do we tag what?

Guidelines (strategic):
          - Security fixes trump anything (current policy)
          - Intelligent case-by-case analysis is required; do not expect rules to shield us from being intelligent
          - Subsystem maintainers should (usually) be responsible/have final say.

Guidelines (tactical):
          - tagged services: @api interface (sometimes normal)
          - tagged service aggregator: @internal class?
          - Classes we intend for extension (*Base): @api (needs privates?)
          - Break base classes into traits (allows more elbow room; some @api/@internal, some not)
          - 3rd party interfaces: If @api, use as is. If not, consider dumb extension
          - Controllers: All @internal
          - Triggered from routing declarations (_entity_view): @internal. (The declaration is the API)
          -- Often the API is behavior, not code. So declare the behavior the API, not the code.
          - Mark most services as private ($container->get() doesn't work)
          - Non-private services MUST have interface
          - Plugins: Mostly @api interface, but not always. Manager is @internal.
          - Don't be afraid to @internal


Other guidelines:
          - Base classes v. diff from interface: Don't do that! (Lookin' at you BlockBase) (maybe traits?)
          - Form arrays: @internal by default
          - Node forms: normal? (most likely to be altered)
          -- Problem: Most of node form is in Seven, not module. (it's already being altered)
          - Render arrays: Document JUST the key keys, those are APIs.

          -

We can always raise guarantee, never lower. (So be conservative to start.)

Expectation: We're going to screw up and want to change something we didn't setup for that
Learning experience! We know not to screw it up in D9.


Deadline: 8.0.0.


        </div>

        <section id="final">
          <h2>Larry Garfield</h2>
          <p>Senior Architect, <a href="http://www.palantir.net/">Palantir.net</a></p>
          <p>Making the Web a Better Place</p>
          <p>Keep tabs on our work at <a href="http://twitter.com/Palantir">@Palantir</a></p>
          <p>Want to hear about <a href="http://eepurl.com/ws6uj">what we're doing</a>?</p>
        </section>
      </div>
    </div>

    <footer class="palantir-logo">
      <a href="http://www.palantir.net/"><img src="palantir/palantirnet-logo-4c-reversed.svg" alt="Palantir.net logo" height="37" /></a>
    </footer>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>
  </body>
</html>
